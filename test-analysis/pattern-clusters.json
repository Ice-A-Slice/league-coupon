{
  "metadata": {
    "analysis_timestamp": "2025-07-16T12:29:42.769Z",
    "total_tests_analyzed": 25,
    "total_clusters_created": 10,
    "clustering_algorithm": "hierarchical_similarity_threshold",
    "analyzer_version": "1.0.0"
  },
  "cluster_summary": {
    "total_clusters": 10,
    "largest_cluster_size": 8,
    "average_cluster_size": 2.5,
    "systemic_clusters": 5
  },
  "clusters": [
    {
      "id": 9,
      "summary": {
        "size": 8,
        "dominant_root_cause": "Database_Seeding_Issues",
        "primary_components": [
          "services",
          "integration"
        ],
        "common_subcategories": [
          "Foreign_Key_Violations"
        ],
        "characteristics": [
          "integration_test_in_services",
          "cup_winner_service_test"
        ],
        "test_files": [
          "/src/services/cup/__tests__/cupWinnerDeterminationService.test.ts",
          "/src/services/cup/__tests__/cupWinnerDeterminationService.test.ts",
          "/src/services/cup/__tests__/cupWinnerDeterminationService.test.ts",
          "/src/services/cup/__tests__/cupWinnerDeterminationService.test.ts",
          "/src/services/cup/__tests__/cupWinnerDeterminationService.test.ts",
          "/src/services/cup/__tests__/cupWinnerDeterminationService.test.ts",
          "/src/services/cup/__tests__/cupWinnerDeterminationService.test.ts",
          "/src/services/cup/__tests__/cupWinnerDeterminationService.test.ts"
        ],
        "severity_score": 16,
        "fix_priority": 31.2
      },
      "description": "Cluster of 8 tests primarily failing due to Database_Seeding_Issues. Affects components: services, integration. This appears to be a systemic database seeding issue affecting multiple test suites.",
      "systemic_indicators": [
        "large_cluster_size",
        "database_infrastructure_issue",
        "directory_wide_impact"
      ],
      "test_details": [
        {
          "file": "/src/services/cup/__tests__/cupWinnerDeterminationService.test.ts",
          "test_name": "should calculate standings with proper ranking and tie handling",
          "component": "services",
          "type": "integration",
          "root_cause": "Database_Seeding_Issues",
          "subcategory": "Foreign_Key_Violations",
          "confidence": 1
        },
        {
          "file": "/src/services/cup/__tests__/cupWinnerDeterminationService.test.ts",
          "test_name": "should handle invalid season ID gracefully",
          "component": "services",
          "type": "integration",
          "root_cause": "Database_Seeding_Issues",
          "subcategory": "Foreign_Key_Violations",
          "confidence": 1
        },
        {
          "file": "/src/services/cup/__tests__/cupWinnerDeterminationService.test.ts",
          "test_name": "should handle null points values",
          "component": "services",
          "type": "integration",
          "root_cause": "Database_Seeding_Issues",
          "subcategory": "Foreign_Key_Violations",
          "confidence": 1
        },
        {
          "file": "/src/services/cup/__tests__/cupWinnerDeterminationService.test.ts",
          "test_name": "should handle missing profile information",
          "component": "services",
          "type": "integration",
          "root_cause": "Database_Seeding_Issues",
          "subcategory": "Foreign_Key_Violations",
          "confidence": 1
        },
        {
          "file": "/src/services/cup/__tests__/cupWinnerDeterminationService.test.ts",
          "test_name": "should sort users with same points consistently by username",
          "component": "services",
          "type": "integration",
          "root_cause": "Database_Seeding_Issues",
          "subcategory": "Foreign_Key_Violations",
          "confidence": 1
        },
        {
          "file": "/src/services/cup/__tests__/cupWinnerDeterminationService.test.ts",
          "test_name": "should identify multiple tied winners",
          "component": "services",
          "type": "integration",
          "root_cause": "Database_Seeding_Issues",
          "subcategory": "Foreign_Key_Violations",
          "confidence": 1
        },
        {
          "file": "/src/services/cup/__tests__/cupWinnerDeterminationService.test.ts",
          "test_name": "should handle database error during winner recording",
          "component": "services",
          "type": "integration",
          "root_cause": "Database_Seeding_Issues",
          "subcategory": "Foreign_Key_Violations",
          "confidence": 1
        },
        {
          "file": "/src/services/cup/__tests__/cupWinnerDeterminationService.test.ts",
          "test_name": "should handle all zero scores scenario (edge case)",
          "component": "services",
          "type": "integration",
          "root_cause": "Database_Seeding_Issues",
          "subcategory": "Foreign_Key_Violations",
          "confidence": 1
        }
      ]
    },
    {
      "id": 1,
      "summary": {
        "size": 4,
        "dominant_root_cause": "Database_Seeding_Issues",
        "primary_components": [
          "api-routes",
          "integration"
        ],
        "common_subcategories": [
          "Foreign_Key_Violations"
        ],
        "characteristics": [
          "api_route_test"
        ],
        "test_files": [
          "/src/app/api/bets/route.test.ts",
          "/src/app/api/bets/route.test.ts",
          "/src/app/api/bets/route.test.ts",
          "/src/app/api/bets/route.test.ts"
        ],
        "severity_score": 12,
        "fix_priority": 18
      },
      "description": "Cluster of 4 tests primarily failing due to Database_Seeding_Issues. Affects components: api-routes, integration. Multiple API routes are affected, suggesting a common infrastructure issue.",
      "systemic_indicators": [
        "database_infrastructure_issue",
        "directory_wide_impact"
      ],
      "test_details": [
        {
          "file": "/src/app/api/bets/route.test.ts",
          "test_name": "should return 200 OK on successful bet submission for an open round",
          "component": "api-routes",
          "type": "integration",
          "root_cause": "Database_Seeding_Issues",
          "subcategory": "Foreign_Key_Violations",
          "confidence": 1
        },
        {
          "file": "/src/app/api/bets/route.test.ts",
          "test_name": "should return 401 Unauthorized if user is not authenticated",
          "component": "api-routes",
          "type": "integration",
          "root_cause": "Database_Seeding_Issues",
          "subcategory": "Foreign_Key_Violations",
          "confidence": 1
        },
        {
          "file": "/src/app/api/bets/route.test.ts",
          "test_name": "should return 400 Bad Request if request body is not a valid array",
          "component": "api-routes",
          "type": "integration",
          "root_cause": "Database_Seeding_Issues",
          "subcategory": "Foreign_Key_Violations",
          "confidence": 1
        },
        {
          "file": "/src/app/api/bets/route.test.ts",
          "test_name": "should return 400 Bad Request if any submitted fixture is not in a betting round",
          "component": "api-routes",
          "type": "integration",
          "root_cause": "Database_Seeding_Issues",
          "subcategory": "Foreign_Key_Violations",
          "confidence": 1
        }
      ]
    },
    {
      "id": 6,
      "summary": {
        "size": 4,
        "dominant_root_cause": "Database_Seeding_Issues",
        "primary_components": [
          "services",
          "integration"
        ],
        "common_subcategories": [
          "Foreign_Key_Violations"
        ],
        "characteristics": [
          "integration_test_in_services",
          "winner_determination_service_test",
          "cup_winner_service_test"
        ],
        "test_files": [
          "/src/services/winnerDeterminationService.test.ts",
          "/src/services/winnerDeterminationService.test.ts",
          "/src/services/winnerDeterminationService.test.ts",
          "/src/services/cup/__tests__/cupWinnerDeterminationService.test.ts"
        ],
        "severity_score": 8,
        "fix_priority": 12
      },
      "description": "Cluster of 4 tests primarily failing due to Database_Seeding_Issues. Affects components: services, integration. Foreign key constraint violations indicate improper test data dependency order.",
      "systemic_indicators": [
        "database_infrastructure_issue"
      ],
      "test_details": [
        {
          "file": "/src/services/winnerDeterminationService.test.ts",
          "test_name": "should return existing winners if already determined integration",
          "component": "services",
          "type": "integration",
          "root_cause": "Database_Seeding_Issues",
          "subcategory": "Foreign_Key_Violations",
          "confidence": 1
        },
        {
          "file": "/src/services/winnerDeterminationService.test.ts",
          "test_name": "should determine single winner successfully integration",
          "component": "services",
          "type": "integration",
          "root_cause": "Database_Seeding_Issues",
          "subcategory": "Foreign_Key_Violations",
          "confidence": 1
        },
        {
          "file": "/src/services/winnerDeterminationService.test.ts",
          "test_name": "should handle individual season processing errors and continue with others integration",
          "component": "services",
          "type": "integration",
          "root_cause": "Database_Seeding_Issues",
          "subcategory": "Foreign_Key_Violations",
          "confidence": 1
        },
        {
          "file": "/src/services/cup/__tests__/cupWinnerDeterminationService.test.ts",
          "test_name": "should return existing winners if already determined (idempotency)",
          "component": "services",
          "type": "integration",
          "root_cause": "Database_Seeding_Issues",
          "subcategory": "Foreign_Key_Violations",
          "confidence": 1
        }
      ]
    },
    {
      "id": 0,
      "summary": {
        "size": 2,
        "dominant_root_cause": "Database_Seeding_Issues",
        "primary_components": [
          "api-routes",
          "integration"
        ],
        "common_subcategories": [
          "Foreign_Key_Violations"
        ],
        "characteristics": [
          "api_route_test"
        ],
        "test_files": [
          "/src/app/api/hall-of-fame/stats/route.test.ts",
          "/src/app/api/hall-of-fame/route.test.ts"
        ],
        "severity_score": 6,
        "fix_priority": 9
      },
      "description": "Cluster of 2 tests primarily failing due to Database_Seeding_Issues. Affects components: api-routes, integration. Foreign key constraint violations indicate improper test data dependency order.",
      "systemic_indicators": [
        "database_infrastructure_issue"
      ],
      "test_details": [
        {
          "file": "/src/app/api/hall-of-fame/stats/route.test.ts",
          "test_name": "should return aggregated stats with default parameters",
          "component": "api-routes",
          "type": "integration",
          "root_cause": "Database_Seeding_Issues",
          "subcategory": "Foreign_Key_Violations",
          "confidence": 1
        },
        {
          "file": "/src/app/api/hall-of-fame/route.test.ts",
          "test_name": "should return Hall of Fame data with default parameters",
          "component": "api-routes",
          "type": "integration",
          "root_cause": "Database_Seeding_Issues",
          "subcategory": "Foreign_Key_Violations",
          "confidence": 1
        }
      ]
    },
    {
      "id": 3,
      "summary": {
        "size": 2,
        "dominant_root_cause": "Database_Seeding_Issues",
        "primary_components": [
          "db",
          "unit"
        ],
        "common_subcategories": [
          "Foreign_Key_Violations"
        ],
        "characteristics": [],
        "test_files": [
          "/tests/utils/db.test.ts",
          "/tests/utils/db.test.ts"
        ],
        "severity_score": 4,
        "fix_priority": 6
      },
      "description": "Cluster of 2 tests primarily failing due to Database_Seeding_Issues. Affects components: db, unit. Foreign key constraint violations indicate improper test data dependency order.",
      "systemic_indicators": [
        "database_infrastructure_issue"
      ],
      "test_details": [
        {
          "file": "/tests/utils/db.test.ts",
          "test_name": "should result in empty tables after truncation",
          "component": "db",
          "type": "unit",
          "root_cause": "Database_Seeding_Issues",
          "subcategory": "Foreign_Key_Violations",
          "confidence": 1
        },
        {
          "file": "/tests/utils/db.test.ts",
          "test_name": "should seed test data successfully",
          "component": "db",
          "type": "unit",
          "root_cause": "Database_Seeding_Issues",
          "subcategory": "Foreign_Key_Violations",
          "confidence": 1
        }
      ]
    },
    {
      "id": 2,
      "summary": {
        "size": 1,
        "dominant_root_cause": "null",
        "primary_components": [
          "api-routes",
          "integration"
        ],
        "common_subcategories": [],
        "characteristics": [
          "api_route_test"
        ],
        "test_files": [
          "/src/app/api/bets/route.test.ts"
        ],
        "severity_score": 1.5,
        "fix_priority": 2.3
      },
      "description": "Cluster of 1 tests primarily failing due to null. Affects components: api-routes, integration. Requires investigation to determine if this represents a systemic issue.",
      "systemic_indicators": [],
      "test_details": [
        {
          "file": "/src/app/api/bets/route.test.ts",
          "test_name": "should return 403 Forbidden if kickoff time is in the past",
          "component": "api-routes",
          "type": "integration",
          "root_cause": null,
          "subcategory": null,
          "confidence": 0
        }
      ]
    },
    {
      "id": 4,
      "summary": {
        "size": 1,
        "dominant_root_cause": "null",
        "primary_components": [
          "db",
          "unit"
        ],
        "common_subcategories": [],
        "characteristics": [],
        "test_files": [
          "/tests/utils/db.test.ts"
        ],
        "severity_score": 1,
        "fix_priority": 1.5
      },
      "description": "Cluster of 1 tests primarily failing due to null. Affects components: db, unit. Requires investigation to determine if this represents a systemic issue.",
      "systemic_indicators": [],
      "test_details": [
        {
          "file": "/tests/utils/db.test.ts",
          "test_name": "should create expected test data",
          "component": "db",
          "type": "unit",
          "root_cause": null,
          "subcategory": null,
          "confidence": 0
        }
      ]
    },
    {
      "id": 5,
      "summary": {
        "size": 1,
        "dominant_root_cause": "null",
        "primary_components": [
          "db",
          "unit"
        ],
        "common_subcategories": [],
        "characteristics": [],
        "test_files": [
          "/tests/utils/db.test.ts"
        ],
        "severity_score": 1,
        "fix_priority": 1.5
      },
      "description": "Cluster of 1 tests primarily failing due to null. Affects components: db, unit. Requires investigation to determine if this represents a systemic issue.",
      "systemic_indicators": [],
      "test_details": [
        {
          "file": "/tests/utils/db.test.ts",
          "test_name": "should reset database without seeding when seed=false",
          "component": "db",
          "type": "unit",
          "root_cause": null,
          "subcategory": null,
          "confidence": 0
        }
      ]
    },
    {
      "id": 7,
      "summary": {
        "size": 1,
        "dominant_root_cause": "Mock_Configuration_Issues",
        "primary_components": [
          "services",
          "integration"
        ],
        "common_subcategories": [
          "Incomplete_Mocks"
        ],
        "characteristics": [
          "integration_test_in_services",
          "winner_determination_service_test"
        ],
        "test_files": [
          "/src/services/winnerDeterminationService.test.ts"
        ],
        "severity_score": 1,
        "fix_priority": 1.5
      },
      "description": "Cluster of 1 tests primarily failing due to Mock_Configuration_Issues. Affects components: services, integration. Requires investigation to determine if this represents a systemic issue.",
      "systemic_indicators": [],
      "test_details": [
        {
          "file": "/src/services/winnerDeterminationService.test.ts",
          "test_name": "should handle tied winners correctly integration",
          "component": "services",
          "type": "integration",
          "root_cause": "Mock_Configuration_Issues",
          "subcategory": "Incomplete_Mocks",
          "confidence": 1
        }
      ]
    },
    {
      "id": 8,
      "summary": {
        "size": 1,
        "dominant_root_cause": "null",
        "primary_components": [
          "services",
          "integration"
        ],
        "common_subcategories": [],
        "characteristics": [
          "integration_test_in_services",
          "winner_determination_service_test"
        ],
        "test_files": [
          "/src/services/winnerDeterminationService.test.ts"
        ],
        "severity_score": 1,
        "fix_priority": 1.5
      },
      "description": "Cluster of 1 tests primarily failing due to null. Affects components: services, integration. Requires investigation to determine if this represents a systemic issue.",
      "systemic_indicators": [],
      "test_details": [
        {
          "file": "/src/services/winnerDeterminationService.test.ts",
          "test_name": "should process multiple completed seasons successfully integration",
          "component": "services",
          "type": "integration",
          "root_cause": null,
          "subcategory": null,
          "confidence": 0
        }
      ]
    }
  ],
  "visualization_data": {
    "cluster_relationships": {
      "nodes": [
        {
          "id": 9,
          "label": "Cluster 9",
          "size": 8,
          "color": "#ff6b6b",
          "group": "Database_Seeding_Issues"
        },
        {
          "id": 1,
          "label": "Cluster 1",
          "size": 4,
          "color": "#ff6b6b",
          "group": "Database_Seeding_Issues"
        },
        {
          "id": 6,
          "label": "Cluster 6",
          "size": 4,
          "color": "#ff6b6b",
          "group": "Database_Seeding_Issues"
        },
        {
          "id": 0,
          "label": "Cluster 0",
          "size": 2,
          "color": "#ff6b6b",
          "group": "Database_Seeding_Issues"
        },
        {
          "id": 3,
          "label": "Cluster 3",
          "size": 2,
          "color": "#ff6b6b",
          "group": "Database_Seeding_Issues"
        },
        {
          "id": 2,
          "label": "Cluster 2",
          "size": 1,
          "color": "#bdc3c7",
          "group": "null"
        },
        {
          "id": 4,
          "label": "Cluster 4",
          "size": 1,
          "color": "#bdc3c7",
          "group": "null"
        },
        {
          "id": 5,
          "label": "Cluster 5",
          "size": 1,
          "color": "#bdc3c7",
          "group": "null"
        },
        {
          "id": 7,
          "label": "Cluster 7",
          "size": 1,
          "color": "#4ecdc4",
          "group": "Mock_Configuration_Issues"
        },
        {
          "id": 8,
          "label": "Cluster 8",
          "size": 1,
          "color": "#bdc3c7",
          "group": "null"
        }
      ],
      "edges": [
        {
          "from": 9,
          "to": 1,
          "weight": 0.7999999999999999,
          "label": "80% similar"
        },
        {
          "from": 9,
          "to": 6,
          "weight": 1,
          "label": "100% similar"
        },
        {
          "from": 9,
          "to": 0,
          "weight": 0.7999999999999999,
          "label": "80% similar"
        },
        {
          "from": 9,
          "to": 3,
          "weight": 0.7,
          "label": "70% similar"
        },
        {
          "from": 1,
          "to": 6,
          "weight": 0.7999999999999999,
          "label": "80% similar"
        },
        {
          "from": 1,
          "to": 0,
          "weight": 1,
          "label": "100% similar"
        },
        {
          "from": 1,
          "to": 3,
          "weight": 0.7,
          "label": "70% similar"
        },
        {
          "from": 6,
          "to": 0,
          "weight": 0.7999999999999999,
          "label": "80% similar"
        },
        {
          "from": 6,
          "to": 3,
          "weight": 0.7,
          "label": "70% similar"
        },
        {
          "from": 0,
          "to": 3,
          "weight": 0.7,
          "label": "70% similar"
        },
        {
          "from": 2,
          "to": 4,
          "weight": 0.7,
          "label": "70% similar"
        },
        {
          "from": 2,
          "to": 5,
          "weight": 0.7,
          "label": "70% similar"
        },
        {
          "from": 2,
          "to": 8,
          "weight": 0.7999999999999999,
          "label": "80% similar"
        },
        {
          "from": 4,
          "to": 5,
          "weight": 1,
          "label": "100% similar"
        },
        {
          "from": 4,
          "to": 8,
          "weight": 0.7,
          "label": "70% similar"
        },
        {
          "from": 5,
          "to": 8,
          "weight": 0.7,
          "label": "70% similar"
        }
      ]
    }
  }
}